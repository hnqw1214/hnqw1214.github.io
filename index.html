<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>






<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta property="og:type" content="website">
<meta property="og:title" content="acmclub.win">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="acmclub.win">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="acmclub.win">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>acmclub.win</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">acmclub.win</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-/"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-/archives"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/15/51nod-1531树上的博弈/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="hnqw1214">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/8E9212F83525E2181D28AA0DBE0BF1D7.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="acmclub.win">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/15/51nod-1531树上的博弈/" itemprop="url">
                  51nod 1531树上的博弈
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-15T22:00:18+08:00">
                2017-07-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h1><p>有一棵n个点的有根树，他有m个叶子结点（叶子结点是那些没有孩子的结点）。边由父亲指向孩子。数字1到m被分配到每一个叶子中。每一个叶子有一个数字，并且每一个数字恰好被分配到一个叶子中。<br>刚开始的时候根部有一个棋子。两个玩家轮流移动棋子，每一步都会将这个棋子向他的某一个孩子移动；如果玩家不能再移动棋子了，那么游戏结束。游戏的结果就是棋子所在叶子上面的数字。游戏的先手想要这个数字最大化，而后手想要这个数字最小化。<br>山巴布里想要给这些叶子分配数字使得最终结果最大，而马族塔想要给这些叶子分配数字使得最终结果最小。那么当山巴布里来分配数字的时候游戏结果会是多少？马族塔分配的时候又是多少呢？山马布里和马族塔并不参加游戏，而是另外两个非常聪明的人来参加游戏。<br>样例解释：在这个样例中，树有三个叶子：3，4和5。如果把数字3分配给3号结点，那么第一个选手就能够让棋子到达那儿，最终结果就是3。另一方面，很明显，无论怎么分配数字，第一个选手让棋子达到最小数字是2。</p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>单组测试数据。<br>第一行有一个整数n (1≤n≤2*10^5)，表示树中结点的数目。<br>接下来n-1行，每一行两个整数ui 和 vi (1≤ui,vi≤n) ，表示树中的边，由ui指向vi。<br>输入保证是一棵有根树，而且根是1。</p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>输出两个整数表示最大值和最小值，以空格分开。</p>
<h1 id="Input示例"><a href="#Input示例" class="headerlink" title="Input示例"></a>Input示例</h1><p>5<br>1 2<br>1 3<br>2 4<br>2 5</p>
<h1 id="Output示例"><a href="#Output示例" class="headerlink" title="Output示例"></a>Output示例</h1><p>3 2</p>
<h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><p>考虑最大化怎么做。<br>假设我的答案是ans，设f[i]表示i子树内需要至少安置多少个&gt;=ans才能使在这个节点往后操作一定能使答案为ans。<br>显然i是先手操作就对每颗子树的f取min，否则求和。<br>显然m-f[1]是最大答案。<br>最小化同理。<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> n,m=<span class="number">0</span>;</div><div class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; a[<span class="number">200001</span>];</div><div class="line"><span class="keyword">int</span> d[<span class="number">200001</span>],f[<span class="number">200001</span>];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> rt)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">if</span> (a[rt].size()==<span class="number">0</span>)</div><div class="line">	&#123;</div><div class="line">		m++;</div><div class="line">		<span class="keyword">return</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">auto</span> u:a[rt])</div><div class="line">	&#123;</div><div class="line">		d[u]=d[rt]+<span class="number">1</span>;</div><div class="line">		dfs(u);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">do1</span><span class="params">(<span class="keyword">int</span> rt)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">if</span> (a[rt].size()==<span class="number">0</span>)</div><div class="line">	&#123;</div><div class="line">		f[rt]=<span class="number">1</span>;</div><div class="line">		<span class="keyword">return</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> (d[rt]&amp;<span class="number">1</span>)</div><div class="line">	&#123;</div><div class="line">		f[rt]=<span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">auto</span> u:a[rt])</div><div class="line">		&#123;</div><div class="line">			do1(u);</div><div class="line">			f[rt]+=f[u];</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">else</span></div><div class="line">	&#123;</div><div class="line">		f[rt]=m+<span class="number">1</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">auto</span> u:a[rt])</div><div class="line">		&#123;</div><div class="line">			do1(u);</div><div class="line">			f[rt]=min(f[rt],f[u]);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">do2</span><span class="params">(<span class="keyword">int</span> rt)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">if</span> (a[rt].size()==<span class="number">0</span>)</div><div class="line">	&#123;</div><div class="line">		f[rt]=<span class="number">1</span>;</div><div class="line">		<span class="keyword">return</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> ((d[rt]&amp;<span class="number">1</span>)==<span class="number">0</span>)</div><div class="line">	&#123;</div><div class="line">		f[rt]=<span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">auto</span> u:a[rt])</div><div class="line">		&#123;</div><div class="line">			do2(u);</div><div class="line">			f[rt]+=f[u];</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">else</span></div><div class="line">	&#123;</div><div class="line">		f[rt]=m+<span class="number">1</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">auto</span> u:a[rt])</div><div class="line">		&#123;</div><div class="line">			do2(u);</div><div class="line">			f[rt]=min(f[rt],f[u]);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">	<span class="keyword">int</span> i;</div><div class="line">	<span class="keyword">for</span> (i=<span class="number">1</span>;i&lt;n;i++)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">int</span> x,y;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;x,&amp;y);</div><div class="line">		a[x].push_back(y);</div><div class="line">	&#125;</div><div class="line">	dfs(<span class="number">1</span>);</div><div class="line">	<span class="comment">//cout&lt;&lt;m&lt;&lt;endl;</span></div><div class="line">	do1(<span class="number">1</span>);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d "</span>,m-f[<span class="number">1</span>]+<span class="number">1</span>);</div><div class="line">	<span class="comment">//memset(f,0,sizeof(f));</span></div><div class="line">	do2(<span class="number">1</span>);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,f[<span class="number">1</span>]);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/10/51nod-1513-codeforces-570D-树上的回文/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="hnqw1214">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/8E9212F83525E2181D28AA0DBE0BF1D7.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="acmclub.win">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/10/51nod-1513-codeforces-570D-树上的回文/" itemprop="url">
                  51nod 1513&codeforces 570D 树上的回文
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-10T16:12:05+08:00">
                2017-07-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h1><p>罗马种了一棵树，树上有n个点。每个点有一个小写英文字母。1号点是树的根，剩下的n-1个点都有一个父亲。点和父亲之间通过一个边相连。第i个点的父亲是pi,且pi&lt;i。<br>一个点的深度是从根到当前点的路径上经过的点数。根的深度是1。<br>U在v的子树中，当且仅当u往根方向走可以到达v。特别的，v也是在v的子树中。<br>罗马给你m个查询，第i个查询包含两个整数vi,hi。现在收集在vi子树中且深度是hi的结点。判断一下把这些结点重新排列是否能组成一个回文。<br>样例解释：<br>一个字符串s是回文，当且仅当他正着读和反着读是一样的。空串也是回文。<br>第一查询中，点1包含z，可以构成回文。<br>第二个查询中点5和6包含c，d，这个不能组成回文。<br>第三个查询中，没有点是深度4的，组成一个空串。<br>第四个查询中，也是构成了一个空串。<br>第五个查询中，2,3,4符合查询条件，包含字母a,c,c。可以构成cac。</p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>单组测试数据。<br>第一行包含两个n, m (1≤n,m≤500000)，表示树的结点数目和查询数目。<br>第二行有n-1个数字 p2,p3,…,pn ，表示每一个点的父亲。(1≤pi&lt;i).<br>接下来一行有n个小写字母，第i个表示第i个点上面的字母。<br>接下来m行每一行有一个查询，包含vi, hi (1≤vi,hi≤n)，表示点编号和深度。</p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>对于每一个查询，如果能够组成回文，输出Yes,否则输出No。</p>
<h1 id="Input示例"><a href="#Input示例" class="headerlink" title="Input示例"></a>Input示例</h1><p>6 5<br>1 1 1 3 3<br>zacccd<br>1 1<br>3 3<br>4 1<br>6 1<br>1 2</p>
<h1 id="Output示例"><a href="#Output示例" class="headerlink" title="Output示例"></a>Output示例</h1><p>Yes<br>No<br>Yes<br>Yes<br>Yes</p>
<h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><p>如果一串字母能构成回文串，则最多只有一个字母出现奇数次。状态压缩保存每个字母出现次数，第i位是1表示从a开始的第i个字母出现奇数次，是0表示出现偶数次。可以利用dfs加回溯离线求出所有询问的状态，一个节点的状态可通过跟子树的状态异或产生。最后如果ans&amp;(ans-1)还不是0，则除去最后一位还有1，肯定不止一个1，因此不可能构成回文串。<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> n,m;</div><div class="line"><span class="keyword">char</span> c[<span class="number">500010</span>];</div><div class="line"><span class="keyword">int</span> height[<span class="number">500010</span>],dep[<span class="number">500010</span>],ans[<span class="number">500010</span>];</div><div class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; q[<span class="number">500010</span>],a[<span class="number">500010</span>];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> rt,<span class="keyword">int</span> d)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">auto</span> u:q[rt]) ans[u]^=dep[height[u]];</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">auto</span> u:a[rt]) dfs(u,d+<span class="number">1</span>);</div><div class="line">	dep[d]^=(<span class="number">1</span>&lt;&lt;(c[rt]-<span class="string">'a'</span>));</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">auto</span> u:q[rt]) ans[u]^=dep[height[u]];</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</div><div class="line">	<span class="keyword">int</span> i;</div><div class="line">	<span class="keyword">for</span> (i=<span class="number">2</span>;i&lt;=n;i++)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">int</span> x;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;x);</div><div class="line">		a[x].push_back(i);</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%s"</span>,c+<span class="number">1</span>);</div><div class="line">	<span class="keyword">for</span> (i=<span class="number">1</span>;i&lt;=m;i++)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">int</span> x,y;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;x,&amp;y);</div><div class="line">		q[x].push_back(i);</div><div class="line">		height[i]=y;</div><div class="line">	&#125;</div><div class="line">	dfs(<span class="number">1</span>,<span class="number">1</span>);</div><div class="line">	<span class="keyword">for</span> (i=<span class="number">1</span>;i&lt;=m;i++)</div><div class="line">		<span class="keyword">if</span> (ans[i]&amp;(ans[i]<span class="number">-1</span>))</div><div class="line">			<span class="built_in">puts</span>(<span class="string">"No"</span>);</div><div class="line">		<span class="keyword">else</span></div><div class="line">			<span class="built_in">puts</span>(<span class="string">"Yes"</span>);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/10/51nod-1040-最大公约数之和/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="hnqw1214">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/8E9212F83525E2181D28AA0DBE0BF1D7.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="acmclub.win">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/10/51nod-1040-最大公约数之和/" itemprop="url">
                  51nod 1040 最大公约数之和
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-10T16:04:33+08:00">
                2017-07-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h1><p>给出一个n，求1-n这n个数，同n的最大公约数的和。比如：n = 6<br>1,2,3,4,5,6 同6的最大公约数分别为1,2,3,2,1,6，加在一起 = 15</p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>1个数N(N &lt;= 10^9)</p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>公约数之和</p>
<h1 id="Input示例"><a href="#Input示例" class="headerlink" title="Input示例"></a>Input示例</h1><p>6</p>
<h1 id="Output示例"><a href="#Output示例" class="headerlink" title="Output示例"></a>Output示例</h1><p>15</p>
<h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><p>既然是1~n与n的公约数，那么肯定是n的因子。<br>每一个n的因子所对sum产生的增量为：gcd(n, i) = x(x为这个因子)的个数，也就是gcd(n / x, i / x) = 1的个数，这时，顺理成章的也就想起了phi(n / x)了，求欧拉函数的方法多种多样，但是这里不能使用筛法，因为内存会爆掉的，只能单独求解欧拉函数，并且在求n得因子上做一定的优化才行，注意sum必须是long long类型的哦。<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line"><span class="keyword">int</span> n;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">euler</span><span class="params">(<span class="keyword">int</span> n)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> res=n,a=n;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i*i&lt;=a;i++)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">if</span>(a%i==<span class="number">0</span>)</div><div class="line">        &#123;</div><div class="line">            res=res/i*(i<span class="number">-1</span>);</div><div class="line">            <span class="keyword">while</span> (a%i==<span class="number">0</span>) a/=i;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(a&gt;<span class="number">1</span>) res=res/a*(a<span class="number">-1</span>);</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">while</span> (~<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n))</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">int</span> i;</div><div class="line">		ll ans=<span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span> (i=<span class="number">1</span>;i*i&lt;=n;i++)</div><div class="line">			<span class="keyword">if</span> (n%i==<span class="number">0</span>)</div><div class="line">			&#123;</div><div class="line">				ans+=<span class="number">1l</span>l*i*euler(n/i);</div><div class="line">				<span class="keyword">if</span> (n!=i*i) ans+=n/i*euler(i);</div><div class="line">			&#125;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,ans);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/10/51nod-1140-矩阵相乘结果的判断/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="hnqw1214">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/8E9212F83525E2181D28AA0DBE0BF1D7.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="acmclub.win">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/10/51nod-1140-矩阵相乘结果的判断/" itemprop="url">
                  51nod 1140 矩阵相乘结果的判断
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-10T15:56:52+08:00">
                2017-07-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h1><p>给出三个N<em>N的矩阵A, B, C，问A </em> B是否等于C？</p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>第1行，1个数N。(0 &lt;= N &lt;= 500)<br>第2 - N + 1行：每行N个数，对应矩阵A的元素。（0 &lt;= M[i] &lt;= 16)<br>第N + 2 - 2N + 1行：每行N个数，对应矩阵B的元素。（0 &lt;= M[i] &lt;= 16)<br>第2N + 2 - 3N + 1行：每行N个数，对应矩阵C的元素。</p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>如果相等输出Yes，否则输出No。</p>
<h1 id="Input示例"><a href="#Input示例" class="headerlink" title="Input示例"></a>Input示例</h1><p>2<br>1 0<br>0 1<br>0 1<br>1 0<br>0 1<br>1 0</p>
<h1 id="Output示例"><a href="#Output示例" class="headerlink" title="Output示例"></a>Output示例</h1><p>Yes</p>
<h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><p>显然，500<em>500</em>500会超时，因此考虑矩阵乘法的结合律，随机产生一个1<em>n的矩阵，A</em>B=C等价于X<em>A</em>B=X<em>C，而计算X</em>A<em>B和X</em>C的复杂度仅n*n。为了确保正确，需多随机出几个矩阵<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;ctime&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> n,a[<span class="number">510</span>][<span class="number">510</span>],b[<span class="number">510</span>][<span class="number">510</span>],c[<span class="number">510</span>][<span class="number">510</span>],x[<span class="number">510</span>],t[<span class="number">510</span>],u[<span class="number">510</span>],v[<span class="number">510</span>];</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">calc</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> i,j;</div><div class="line">	<span class="keyword">for</span> (i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">			x[i]=rand()%<span class="number">1000</span>;</div><div class="line">	<span class="built_in">memset</span>(t,<span class="number">0</span>,<span class="keyword">sizeof</span>(t));</div><div class="line">	<span class="built_in">memset</span>(u,<span class="number">0</span>,<span class="keyword">sizeof</span>(u));</div><div class="line">	<span class="built_in">memset</span>(v,<span class="number">0</span>,<span class="keyword">sizeof</span>(v));</div><div class="line">	<span class="keyword">for</span> (i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">		<span class="keyword">for</span> (j=<span class="number">1</span>;j&lt;=n;j++)</div><div class="line">			t[i]+=x[j]*a[j][i];</div><div class="line">	<span class="keyword">for</span> (i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">		<span class="keyword">for</span> (j=<span class="number">1</span>;j&lt;=n;j++)</div><div class="line">			u[i]+=t[j]*b[j][i];</div><div class="line">	<span class="keyword">for</span> (i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">		<span class="keyword">for</span> (j=<span class="number">1</span>;j&lt;=n;j++)</div><div class="line">			v[i]+=x[j]*c[j][i];</div><div class="line">	<span class="keyword">for</span> (i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">		<span class="keyword">if</span> (u[i]!=v[i]) <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	srand(<span class="keyword">int</span>(time(<span class="number">0</span>)));</div><div class="line">	<span class="keyword">while</span> (~<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n))</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">int</span> i,j;</div><div class="line">		<span class="keyword">for</span> (i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">			<span class="keyword">for</span> (j=<span class="number">1</span>;j&lt;=n;j++)</div><div class="line">				<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i][j]);</div><div class="line">		<span class="keyword">for</span> (i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">			<span class="keyword">for</span> (j=<span class="number">1</span>;j&lt;=n;j++)</div><div class="line">				<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;b[i][j]);</div><div class="line">		<span class="keyword">for</span> (i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">			<span class="keyword">for</span> (j=<span class="number">1</span>;j&lt;=n;j++)</div><div class="line">				<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;c[i][j]);</div><div class="line">		<span class="keyword">bool</span> can=<span class="literal">true</span>;</div><div class="line">		<span class="keyword">for</span> (i=<span class="number">1</span>;i&lt;=<span class="number">4</span>;i++)</div><div class="line">			<span class="keyword">if</span> (!calc())</div><div class="line">			&#123;</div><div class="line">				can=<span class="literal">false</span>;</div><div class="line">				<span class="keyword">break</span>;</div><div class="line">			&#125;</div><div class="line">		<span class="keyword">if</span> (can) <span class="built_in">puts</span>(<span class="string">"Yes"</span>);</div><div class="line">		<span class="keyword">else</span> <span class="built_in">puts</span>(<span class="string">"No"</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/10/51nod-1055最长等差数列/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="hnqw1214">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/8E9212F83525E2181D28AA0DBE0BF1D7.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="acmclub.win">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/10/51nod-1055最长等差数列/" itemprop="url">
                  51nod 1055最长等差数列
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-10T15:48:24+08:00">
                2017-07-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h1><p>N个不同的正整数，找出由这些数组成的最长的等差数列。</p>
<p>例如：1 3 5 6 8 9 10 12 13 14<br>等差子数列包括(仅包括两项的不列举）<br>1 3 5<br>1 5 9 13<br>3 6 9 12<br>3 8 13<br>5 9 13<br>6 8 10 12 14</p>
<p>其中6 8 10 12 14最长，长度为5。</p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>第1行：N，N为正整数的数量(3 &lt;= N &lt;= 10000)。<br>第2 - N+1行：N个正整数。(2&lt;= A[i] &lt;= 10^9)</p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>最长等差数列的长度。</p>
<h1 id="Input示例"><a href="#Input示例" class="headerlink" title="Input示例"></a>Input示例</h1><p>10<br>1<br>3<br>5<br>6<br>8<br>9<br>10<br>12<br>13<br>14</p>
<h1 id="Output示例"><a href="#Output示例" class="headerlink" title="Output示例"></a>Output示例</h1><p>5</p>
<h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><p>考虑n^2的dp，dp[i][j]表示以a[i],a[j]开头的最长等差数列的长度。将输入的原序列排序，然后枚举中点j，往两边搜索，如果j和两边的数可以构成等差数列，则前面的可由后面的推出，即加了一位。<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> n,a[<span class="number">10001</span>];</div><div class="line"><span class="keyword">short</span> dp[<span class="number">10001</span>][<span class="number">10001</span>];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">	<span class="keyword">int</span> i,j,k;</div><div class="line">	<span class="keyword">for</span> (i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]);</div><div class="line">	sort(a+<span class="number">1</span>,a+n+<span class="number">1</span>);</div><div class="line">	<span class="keyword">for</span> (i=<span class="number">1</span>;i&lt;n;i++)</div><div class="line">		<span class="keyword">for</span> (j=i+<span class="number">1</span>;j&lt;=n;j++)</div><div class="line">			dp[i][j]=<span class="number">2</span>;</div><div class="line">	<span class="keyword">short</span> ans=<span class="number">2</span>;</div><div class="line">	<span class="keyword">for</span> (j=n<span class="number">-1</span>;j&gt;=<span class="number">2</span>;j--)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">int</span> i=j<span class="number">-1</span>;k=j+<span class="number">1</span>;</div><div class="line">		<span class="keyword">while</span> (i&gt;=<span class="number">1</span>&amp;&amp;k&lt;=n)</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">if</span> (a[i]+a[k]&lt;<span class="number">2</span>*a[j]) k++;</div><div class="line">			<span class="keyword">else</span> <span class="keyword">if</span> (a[i]+a[k]&gt;<span class="number">2</span>*a[j]) i--;</div><div class="line">			<span class="keyword">else</span></div><div class="line">			&#123;</div><div class="line">				dp[i][j]=dp[j][k]+<span class="number">1</span>;</div><div class="line">				ans=max(ans,dp[i][j]);</div><div class="line">				i--;</div><div class="line">				k++;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/31/开发报告/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="hnqw1214">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/8E9212F83525E2181D28AA0DBE0BF1D7.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="acmclub.win">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/31/开发报告/" itemprop="url">
                  开发报告
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-31T13:32:34+08:00">
                2017-05-31
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="个人网站开发报告"><a href="#个人网站开发报告" class="headerlink" title="个人网站开发报告"></a><strong>个人网站开发报告</strong></h2><h3 id="1-本站点的策划思路"><a href="#1-本站点的策划思路" class="headerlink" title="1.本站点的策划思路"></a>1.本站点的策划思路</h3><p>经过本学期WEB前端开发技术课程的学习，我对网站设计及相关工具与框架的使用有了深入的了解，在本学期末制作主题为个人主页的网站。本网站内容充实，包括自己的简介以及自己记录ACM经典题目的博客，期望大家能够通过浏览本网站了解自己。并且尽可能让浏览网站的人本着简单易懂的原则，用户只要点击链接就能打开自己想要浏览的内容，在首页上即简要包括整个网站的内容。同时，在设计的过程中运用了模板、框架等，每个页面均设计导航条，既增加了页面的美观度，又方便了用户的使用。</p>
<p>###2.页面结构与说明<br>该网站主要由5个页面组成，分别为首页、关于我、我的博客、我的相册以及登录界面。下面分别介绍每个页面。</p>
<h5 id="1-首页"><a href="#1-首页" class="headerlink" title="1.首页"></a>1.首页</h5><p>首页的URL地址为<a href="http://acmclub.win/my-homework/index.html。页面的最上面是一个导航栏（点击导航栏能进入具体页面），然后是由相册内一些图片组成的轮番图（点击后能进入相册），接着是由博客内一些文章的标题组成的列表（点击标题能进入文章，最上方有“更多”按钮，点击后能进入博客的列表页）。最下面是“关于我”页面的内容纲要，点击下方的More能进入关于我界面。" target="_blank" rel="external">http://acmclub.win/my-homework/index.html。页面的最上面是一个导航栏（点击导航栏能进入具体页面），然后是由相册内一些图片组成的轮番图（点击后能进入相册），接着是由博客内一些文章的标题组成的列表（点击标题能进入文章，最上方有“更多”按钮，点击后能进入博客的列表页）。最下面是“关于我”页面的内容纲要，点击下方的More能进入关于我界面。</a></p>
<h5 id="2-关于我"><a href="#2-关于我" class="headerlink" title="2.关于我"></a>2.关于我</h5><p>关于我的URL地址为<a href="http://acmclub.win/my-homework/myself.html。页面的最上方有一个顶部导航栏，点击后能跳转到页面内描述相应内容的地方。同时，页面的左边也有一个侧边栏（默认是隐藏的，可以通过点击绿色的按钮显示及隐藏），作用跟顶部导航栏一样，也能实现跳转的功能。该页面的主要作用是介绍自己，为了丰富页面的内容，最下面还转载了一篇我的博客，同时设定了博客的友情链接。" target="_blank" rel="external">http://acmclub.win/my-homework/myself.html。页面的最上方有一个顶部导航栏，点击后能跳转到页面内描述相应内容的地方。同时，页面的左边也有一个侧边栏（默认是隐藏的，可以通过点击绿色的按钮显示及隐藏），作用跟顶部导航栏一样，也能实现跳转的功能。该页面的主要作用是介绍自己，为了丰富页面的内容，最下面还转载了一篇我的博客，同时设定了博客的友情链接。</a></p>
<h5 id="3-我的博客"><a href="#3-我的博客" class="headerlink" title="3.我的博客"></a>3.我的博客</h5><p>我的博客的URL地址为<a href="http://acmclub.win。博客的首页有每篇文章的详细内容。如果只要显示文章的标题，可以进入归档页面，按博文发布的时间顺序排序。点击标题后能进入文章的详细页。" target="_blank" rel="external">http://acmclub.win。博客的首页有每篇文章的详细内容。如果只要显示文章的标题，可以进入归档页面，按博文发布的时间顺序排序。点击标题后能进入文章的详细页。</a></p>
<h5 id="4-我的相册"><a href="#4-我的相册" class="headerlink" title="4.我的相册"></a>4.我的相册</h5><p>我的相册的URL地址为<a href="http://acmclub.win/my-homework/photo.html。点击上方的小房子能回到首页，点击箭头能进入我的博客" target="_blank" rel="external">http://acmclub.win/my-homework/photo.html。点击上方的小房子能回到首页，点击箭头能进入我的博客</a></p>
<h5 id="5-登录界面"><a href="#5-登录界面" class="headerlink" title="5.登录界面"></a>5.登录界面</h5><p>登录界面的URL地址为<a href="http://acmclub.win/my-homework/login.html。能输入用户名及密码，左上角有返回首页按钮。" target="_blank" rel="external">http://acmclub.win/my-homework/login.html。能输入用户名及密码，左上角有返回首页按钮。</a></p>
<h3 id="3-技术指标"><a href="#3-技术指标" class="headerlink" title="3.技术指标"></a>3.技术指标</h3><ul>
<li>兼容的浏览器版本：IE 9+、chrome、firefox等。</li>
<li>所使用的HTML版本：HTML 5</li>
<li>所使用的CSS版本：CSS 3</li>
<li>开发工具：chrome浏览器、sublime_text 编辑器</li>
<li>网页服务器：GitHub Pages<h3 id="4-技术点说明"><a href="#4-技术点说明" class="headerlink" title="4.技术点说明"></a>4.技术点说明</h3><h4 id="1-侧边导航栏的显示与隐藏"><a href="#1-侧边导航栏的显示与隐藏" class="headerlink" title="1.侧边导航栏的显示与隐藏"></a>1.侧边导航栏的显示与隐藏</h4>在关于我页面有侧边栏，然而，如果浏览器窗口过小，侧边栏会挡住网站的正文内容。为了让网站适应多种屏幕，同时又能方便网站的跳转，因而实现了侧边导航栏的显示与隐藏功能。<br>首先添加一个按钮，再为该按钮添加点击事件，以改变侧边栏的left参数实现显示与隐藏。<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (!show) &#123;</div><div class="line">    $(<span class="string">'.nav2'</span>).animate(&#123;</div><div class="line">      <span class="attr">left</span>: <span class="number">0</span></div><div class="line">    &#125;, <span class="number">300</span>);</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    $(<span class="string">'.nav2'</span>).animate(&#123;</div><div class="line">      <span class="attr">left</span>: <span class="number">-235</span></div><div class="line">    &#125;, <span class="number">300</span>);</div><div class="line">  &#125;</div><div class="line">  show = !show;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="2-雪碧图的制作与使用"><a href="#2-雪碧图的制作与使用" class="headerlink" title="2.雪碧图的制作与使用"></a>2.雪碧图的制作与使用</h4><p>为了减少网页http的请求数量，把网站上用到的一些图片整合到一张单独的图片，然后利用CSS的背景地位来显示需要显示的图片部分。<br>首先在<a href="http://csssprites.com/中添加图片并合成雪碧图，然后再在css上定位，最终能正确地显示图片。" target="_blank" rel="external">http://csssprites.com/中添加图片并合成雪碧图，然后再在css上定位，最终能正确地显示图片。</a><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="selector-id">#main</span> <span class="selector-tag">li</span></div><div class="line">&#123;</div><div class="line">  <span class="attribute">background</span>:<span class="built_in">url</span>(<span class="string">"../img/result (1).png"</span>) no-repeat <span class="number">0</span> -<span class="number">16px</span>;</div><div class="line">  <span class="attribute">padding-left</span>:<span class="number">22px</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="3-个人博客的搭载"><a href="#3-个人博客的搭载" class="headerlink" title="3.个人博客的搭载"></a>3.个人博客的搭载</h4><p>GitHub Pages只能管理静态的网页，因此需要搭载静态的博客，在这里使用了Hexo框架搭载博客。<br>首先准备搭建环境（包括node.js及git），然后安装及配置hexo，再将hexo和GitHub Pages联系起来，最后在上面发布文章。<br>在上面发布文章，只需写好markdown文件，然后通过命令发布到GitHub上。</p>
<h3 id="5-开发心得"><a href="#5-开发心得" class="headerlink" title="5.开发心得"></a>5.开发心得</h3><p>通过这次制作网页，我学到了不少东西，而且学到了不少思考问题的方法。完成一个项目会碰到各种各样的问题，在这里关键在于不断搜集资料而解决问题。计算机会在以后的学习生活中充当越来越重要的角色，相信我也会学习到更多关于网页设计前端和后端的知识。这次制作网页收获确实不小！</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/22/Chef-and-Sub-Array（树状数组求区间最值）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="hnqw1214">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/8E9212F83525E2181D28AA0DBE0BF1D7.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="acmclub.win">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/22/Chef-and-Sub-Array（树状数组求区间最值）/" itemprop="url">
                  Chef and Sub Array（树状数组求区间最值）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-22T10:48:43+08:00">
                2017-05-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h1><p>Chef has a binary array A of length N. He also has a frame that can focus on at max K consecutive elements of the array.</p>
<p>Chef has a lovely dog which likes to do following two things.</p>
<p>Shifting the array A to the right by one element (N-th element becomes 1st, 1st becomes 2nd and so on)<br>Asking Chef what is the maximal number of elements equal to 1, that can be captured by a frame (frame can capture not more than K consecutive elements of array).<br>Help Chef entertain his Dog!</p>
<p>Input<br>The first line of each test case contains three integers N, K and P denoting the number of elements in array A, size of a frame and the number of Dog’s requests.</p>
<p>The second line contains N space-separated integers A1, A2, …, AN denoting the elements of array.</p>
<p>The third line contains string consisting of P characters, i-th character stands for dog’s i-th question and equals ‘!’ if Dog shifts the array and ‘?’ if dog asks what is the maximal number of ones captured by the frame.</p>
<p>Output<br>For each Dog’s question output a single line containing an integer corresponding to the answer of the question.</p>
<p>Constraints<br>1 ≤ N, K, P ≤ 105<br>0 ≤ Ai ≤ 1<br>Subtasks<br>Subtask #1 (30 points) N, K, P ≤ 103<br>Subtask #2 (70 points) Original constraints.<br>Example<br>Input:<br>5 3 4<br>1 0 0 1 1<br>?!!?</p>
<p>Output:<br>2<br>3<br>Explanation<br>Example case 1.</p>
<p>For the first question , Chef can pick last 3 elements (or last two, no matter) for his frame, and will have 2 elements equal 1.</p>
<p>After first shift (exclamation mark) array will become: 1 1 0 0 1.</p>
<p>After second shift (exclamation mark) array will become: 1 1 1 0 0.</p>
<p>Now for the second question Chef can pick first 3 elements for his frame, and will have 3 elements equal 1.</p>
<h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><p>先预处理出每个位置最多能覆盖多少个，然后树状数组求区间最值。注意，可能存在框比序列长的情况。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> a[<span class="number">400001</span>],idx[<span class="number">400001</span>];</div><div class="line"><span class="keyword">int</span> num[<span class="number">400001</span>];</div><div class="line"><span class="keyword">int</span> n,k,p;</div><div class="line"><span class="keyword">char</span> c[<span class="number">400001</span>];</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">Lowbit</span><span class="params">(<span class="keyword">int</span> x)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">return</span> x&amp;-x;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Init</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</div><div class="line">        idx[i]=num[i];</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;Lowbit(i);j&lt;&lt;=<span class="number">1</span>)&#123;</div><div class="line">            idx[i]=max(idx[i],idx[i-j]);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">Query</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span>&#123;</div><div class="line">    <span class="keyword">int</span> ans=num[r];</div><div class="line">    <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</div><div class="line">        ans=max(ans,num[r]);</div><div class="line">        <span class="keyword">if</span>(r==l) <span class="keyword">break</span>;</div><div class="line">        <span class="keyword">for</span>(r-=<span class="number">1</span>;r-l&gt;=Lowbit(r);r-=Lowbit(r))&#123;</div><div class="line">            ans=max(ans,idx[r]);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> ans;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;n,&amp;k,&amp;p);</div><div class="line">	<span class="keyword">int</span> i,sum=<span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span> (i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">	&#123;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]);</div><div class="line">		a[i+n]=a[i];</div><div class="line">		sum+=a[i];</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span> (i=<span class="number">1</span>;i&lt;=k;i++)</div><div class="line">		num[i]=num[i<span class="number">-1</span>]+a[i];</div><div class="line">	<span class="keyword">int</span> tot=num[k];</div><div class="line">	<span class="keyword">for</span> (i=k+<span class="number">1</span>;i&lt;=<span class="number">2</span>*n;i++)</div><div class="line">	&#123;</div><div class="line">		<span class="comment">//cout&lt;&lt;tot&lt;&lt;endl;</span></div><div class="line">		tot-=a[i-k];</div><div class="line">		tot+=a[i];</div><div class="line">		num[i]=tot;</div><div class="line">	&#125;</div><div class="line">	Init(<span class="number">2</span>*n);</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%s"</span>,c);</div><div class="line">	<span class="keyword">int</span> l=n+<span class="number">1</span>,r=<span class="number">2</span>*n;</div><div class="line">	<span class="keyword">for</span> (i=<span class="number">0</span>;i&lt;p;i++)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">if</span> (c[i]==<span class="string">'?'</span>)</div><div class="line">		&#123;	</div><div class="line">			<span class="keyword">if</span> (l+k<span class="number">-1</span>&lt;=r)</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,Query(l+k<span class="number">-1</span>,r));</div><div class="line">			<span class="keyword">else</span></div><div class="line">				<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,sum);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">else</span></div><div class="line">		&#123;</div><div class="line">			l--;</div><div class="line">			r--;</div><div class="line">			<span class="keyword">if</span> (r==n)</div><div class="line">			&#123;</div><div class="line">				l+=n;</div><div class="line">				r+=n;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/03/DNA-repair(AC自动机+DP)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="hnqw1214">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/8E9212F83525E2181D28AA0DBE0BF1D7.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="acmclub.win">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/03/DNA-repair(AC自动机+DP)/" itemprop="url">
                  DNA-repair(AC自动机+DP)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-03T19:09:09+08:00">
                2017-05-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Problem-Description"><a href="#Problem-Description" class="headerlink" title="Problem Description"></a>Problem Description</h1><p>Biologists finally invent techniques of repairing DNA that contains segments causing kinds of inherited diseases. For the sake of simplicity, a DNA is represented as a string containing characters ‘A’, ‘G’ , ‘C’ and ‘T’. The repairing techniques are simply to change some characters to eliminate all segments causing diseases. For example, we can repair a DNA “AAGCAG” to “AGGCAC” to eliminate the initial causing disease segments “AAG”, “AGC” and “CAG” by changing two characters. Note that the repaired DNA can still contain only characters ‘A’, ‘G’, ‘C’ and ‘T’.</p>
<p>You are to help the biologists to repair a DNA by changing least number of characters.</p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>The input consists of multiple test cases. Each test case starts with a line containing one integers N (1 ≤ N ≤ 50), which is the number of DNA segments causing inherited diseases. The following N lines gives N non-empty strings of length not greater than 20 containing only characters in “AGCT”, which are the DNA segments causing inherited disease. The last line of the test case is a non-empty string of length not greater than 1000 containing only characters in “AGCT”, which is the DNA to be repaired. The last test case is followed by a line containing one zeros.</p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>For each test case, print a line containing the test case number( beginning with 1) followed by the number of characters which need to be changed. If it’s impossible to repair the given DNA, print -1.</p>
<h1 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h1><p>2<br>AAA<br>AAG<br>AAAG<br>2<br>A<br>TG<br>TGAATG<br>4<br>A<br>G<br>C<br>T<br>AGT<br>0</p>
<h1 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h1><p>Case 1: 1<br>Case 2: 4<br>Case 3: -1</p>
<h1 id="Source"><a href="#Source" class="headerlink" title="Source"></a>Source</h1><p>2008 Asia Hefei Regional Contest Online by USTC</p>
<h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><p>对给出的得病的串进行自动机构造，dp[i][j]对应了走i步从根到达第j个节点的最小值。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf = <span class="number">0x3f3f3f3f</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Trie</span> &#123;</span></div><div class="line">    <span class="keyword">int</span> next[<span class="number">1010</span>][<span class="number">4</span>], fail[<span class="number">1010</span>];</div><div class="line">    <span class="keyword">int</span> end[<span class="number">1010</span>];</div><div class="line">    <span class="keyword">int</span> root, L;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">newNode</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++)</div><div class="line">            next[L][i] = <span class="number">-1</span>;</div><div class="line">        end[L++] = <span class="literal">false</span>;</div><div class="line">        <span class="keyword">return</span> L<span class="number">-1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</div><div class="line">        L = <span class="number">0</span>;</div><div class="line">        root = newNode();</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getInt</span><span class="params">(<span class="keyword">char</span> ch)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (ch == <span class="string">'A'</span>) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (ch == <span class="string">'C'</span>) <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (ch == <span class="string">'G'</span>) <span class="keyword">return</span> <span class="number">2</span>;</div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (ch == <span class="string">'T'</span>) <span class="keyword">return</span> <span class="number">3</span>;</div><div class="line">    &#125; </div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">char</span> buf[])</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> len = <span class="built_in">strlen</span>(buf);</div><div class="line">        <span class="keyword">int</span> now = root;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</div><div class="line">            <span class="keyword">if</span> (next[now][getInt(buf[i])] == <span class="number">-1</span>)</div><div class="line">                next[now][getInt(buf[i])] = newNode();</div><div class="line">            now = next[now][getInt(buf[i])];</div><div class="line">        &#125;</div><div class="line">        end[now] = <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; Q;</div><div class="line">        fail[root] = root;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</div><div class="line">            <span class="keyword">if</span> (next[root][i] == <span class="number">-1</span>)</div><div class="line">                next[root][i] = root;</div><div class="line">            <span class="keyword">else</span> &#123;</div><div class="line">                fail[next[root][i]] = root;</div><div class="line">                Q.push(next[root][i]);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="keyword">while</span> (!Q.empty()) &#123;</div><div class="line">            <span class="keyword">int</span> now = Q.front();</div><div class="line">            Q.pop();</div><div class="line">            <span class="keyword">if</span> (end[fail[now]]) end[now] = <span class="number">1</span>;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++)</div><div class="line">                <span class="keyword">if</span> (next[now][i] == <span class="number">-1</span>)</div><div class="line">                    next[now][i] = next[fail[now]][i];</div><div class="line">                <span class="keyword">else</span> &#123;</div><div class="line">                    fail[next[now][i]] = next[fail[now]][i];</div><div class="line">                    Q.push(next[now][i]);</div><div class="line">                &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">int</span> dp[<span class="number">1010</span>][<span class="number">1010</span>];</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">(<span class="keyword">char</span> buf[])</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> len = <span class="built_in">strlen</span>(buf);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= len; i++)</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; L; j++)</div><div class="line">                dp[i][j] = inf;</div><div class="line">        </div><div class="line">        dp[<span class="number">0</span>][root] = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; L; j++)</div><div class="line">                <span class="keyword">if</span> (dp[i][j] != inf) &#123;</div><div class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; <span class="number">4</span>; k++) &#123;</div><div class="line">                        <span class="keyword">int</span> news = next[j][k];</div><div class="line">                        <span class="keyword">if</span> (end[news]) <span class="keyword">continue</span>;</div><div class="line">                        <span class="keyword">int</span> tmp;</div><div class="line">                        <span class="keyword">if</span> (k == getInt(buf[i]))</div><div class="line">                            tmp = dp[i][j];</div><div class="line">                        <span class="keyword">else</span> tmp = dp[i][j] + <span class="number">1</span>;</div><div class="line">                        dp[i+<span class="number">1</span>][news] = min(dp[i+<span class="number">1</span>][news], tmp);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">        </div><div class="line">        <span class="keyword">int</span> ans = inf;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; L; j++)</div><div class="line">            ans = min(ans, dp[len][j]);</div><div class="line">        <span class="keyword">if</span> (ans == inf)</div><div class="line">            ans = <span class="number">-1</span>;</div><div class="line">        <span class="keyword">return</span> ans;</div><div class="line">    &#125;</div><div class="line">&#125; ac;</div><div class="line"><span class="keyword">char</span> buf[<span class="number">1010</span>];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> n, cas = <span class="number">1</span>;</div><div class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n) != EOF &amp;&amp; n) &#123;</div><div class="line">        ac.init();</div><div class="line">        <span class="keyword">while</span> (n--) &#123;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%s"</span>, buf);</div><div class="line">            ac.insert(buf);</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        ac.build();</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%s"</span>, buf);</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"Case %d: %d\n"</span>, cas++, ac.solve(buf));</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/03/考研路茫茫——单词情结-AC自动机-矩阵快速幂/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="hnqw1214">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/8E9212F83525E2181D28AA0DBE0BF1D7.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="acmclub.win">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/03/考研路茫茫——单词情结-AC自动机-矩阵快速幂/" itemprop="url">
                  考研路茫茫——单词情结(AC自动机+矩阵快速幂)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-03T19:00:02+08:00">
                2017-05-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Problem-Description"><a href="#Problem-Description" class="headerlink" title="Problem Description"></a>Problem Description</h1><p>背单词，始终是复习英语的重要环节。在荒废了3年大学生涯后，Lele也终于要开始背单词了。<br>一天，Lele在某本单词书上看到了一个根据词根来背单词的方法。比如”ab”,放在单词前一般表示”相反，变坏，离去”等。</p>
<p>于是Lele想，如果背了N个词根，那这些词根到底会不会在单词里出现呢。更确切的描述是：长度不超过L，只由小写字母组成的，至少包含一个词根的单词，一共可能有多少个呢？这里就不考虑单词是否有实际意义。</p>
<p>比如一共有2个词根 aa 和 ab ，则可能存在104个长度不超过3的单词，分别为<br>(2个) aa,ab,<br>(26个)aaa,aab,aac…aaz,<br>(26个)aba,abb,abc…abz,<br>(25个)baa,caa,daa…zaa,<br>(25个)bab,cab,dab…zab。</p>
<p>这个只是很小的情况。而对于其他复杂点的情况，Lele实在是数不出来了，现在就请你帮帮他。</p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>本题目包含多组数据，请处理到文件结束。 每组数据占两行。 第一行有两个正整数N和L。(0&lt;N&lt;6,0&lt;L&lt;2^31) 第二行有N个词根，每个词根仅由小写字母组成，长度不超过5。两个词根中间用一个空格分隔开。</p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>对于每组数据，请在一行里输出一共可能的单词数目。 由于结果可能非常巨大，你只需要输出单词总数模2^64的值。</p>
<h1 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h1><p>2 3<br>aa ab<br>1 2<br>a</p>
<h1 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h1><p>104<br>52</p>
<h1 id="Author"><a href="#Author" class="headerlink" title="Author"></a>Author</h1><p>linle</p>
<h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><p>这题，是给定一些模式串。求出长度不超过m的，包含模式串的个数。</p>
<p>因为对2^64取模，所以定义数据类型为unsigned long long就可以了，这样就实现了自动取模。</p>
<p>本题使用AC自动机类似得到状态转移的矩阵。</p>
<p>但是因为要求和。</p>
<p>所以在POJ 2778 得到的L*L的矩阵中，需要增加一维，第L+1列全部为1</p>
<p>这样求出不包含模式串，而且长度不超过m的，然后总数减掉这个就是答案了。。</p>
<p>总数是26^1 + 26^2 + ……+ 26^m</p>
<p> f[n]=1 + 26^1 + 26^2 +…26^n<br> f[n]=26*f[n-1]+1<br> {f[n] 1} = {f[n-1] 1}[26 0;1 1]<br> 数是f[L]-1;<br> 此题的L&lt;2^31.矩阵的幂不能是L+1次，否则就超时了</p>
<p>很有意思的题目。。。只是这画图和公式都很难弄。。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 0x3f3f3f3f</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> eps 1e-8</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> pi acos(-1.0)</span></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line"><span class="keyword">const</span> ll mod=<span class="number">100000</span>;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Matrix</span>&#123;</span></div><div class="line">    ll n,mat[<span class="number">40</span>][<span class="number">40</span>];</div><div class="line">    Matrix()&#123;&#125;</div><div class="line">    Matrix(ll _n)&#123;</div><div class="line">        n=_n;</div><div class="line">        <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;n;i++)</div><div class="line">            <span class="keyword">for</span>(ll j=<span class="number">0</span>;j&lt;n;j++)</div><div class="line">                mat[i][j]=<span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="function">Matrix <span class="title">mul</span><span class="params">(Matrix a,Matrix b)</span></span>&#123;</div><div class="line">    Matrix ans=Matrix(a.n);</div><div class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;a.n;i++)</div><div class="line">        <span class="keyword">for</span>(ll j=<span class="number">0</span>;j&lt;a.n;j++)</div><div class="line">            <span class="keyword">for</span>(ll k=<span class="number">0</span>;k&lt;a.n;k++)</div><div class="line">                ans.mat[i][j]=ans.mat[i][j]+a.mat[i][k]*b.mat[k][j];</div><div class="line">    <span class="keyword">return</span> ans;</div><div class="line">&#125;</div><div class="line"><span class="function">Matrix <span class="title">pw</span><span class="params">(Matrix a,ll n)</span></span>&#123;</div><div class="line">    Matrix ans=Matrix(a.n);</div><div class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;a.n;i++)</div><div class="line">        ans.mat[i][i]=<span class="number">1</span>;</div><div class="line">    <span class="keyword">while</span>(n)&#123;</div><div class="line">        <span class="keyword">if</span>(n%<span class="number">2</span>)</div><div class="line">            ans=mul(ans,a);</div><div class="line">        a=mul(a,a);</div><div class="line">        n&gt;&gt;=<span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> ans;</div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Trie</span>&#123;</span></div><div class="line">    ll next[<span class="number">300</span>][<span class="number">26</span>],fail[<span class="number">300</span>],end[<span class="number">300</span>];</div><div class="line">    ll L,root;</div><div class="line">    <span class="function">ll <span class="title">newnode</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;<span class="number">26</span>;i++)</div><div class="line">            next[L][i]=<span class="number">-1</span>;</div><div class="line">        end[L++]=<span class="number">0</span>;</div><div class="line">        <span class="keyword">return</span> L<span class="number">-1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</div><div class="line">        L=<span class="number">0</span>;</div><div class="line">        root=newnode();</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">char</span> *str)</span></span>&#123;</div><div class="line">        ll len=<span class="built_in">strlen</span>(str);</div><div class="line">        ll now=root;</div><div class="line">        <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;len;i++)&#123;</div><div class="line">            ll p=str[i]-<span class="string">'a'</span>;</div><div class="line">            <span class="keyword">if</span>(next[now][p]==<span class="number">-1</span>)</div><div class="line">                next[now][p]=newnode();</div><div class="line">            now=next[now][p];</div><div class="line">        &#125;</div><div class="line">        end[now]=<span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="built_in">queue</span>&lt;ll&gt; q;</div><div class="line">        fail[root]=root;</div><div class="line">        <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;<span class="number">26</span>;i++)</div><div class="line">            <span class="keyword">if</span>(next[root][i]==<span class="number">-1</span>)</div><div class="line">                next[root][i]=root;</div><div class="line">            <span class="keyword">else</span> &#123;</div><div class="line">                fail[next[root][i]]=root;</div><div class="line">                q.push(next[root][i]);</div><div class="line">            &#125;</div><div class="line">        <span class="keyword">while</span>(!q.empty())&#123;</div><div class="line">            ll now=q.front();</div><div class="line">            q.pop();</div><div class="line">            <span class="keyword">if</span>(end[fail[now]])end[now]=<span class="number">1</span>;</div><div class="line">            <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;<span class="number">26</span>;i++)</div><div class="line">                <span class="keyword">if</span>(next[now][i]==<span class="number">-1</span>)</div><div class="line">                    next[now][i]=next[fail[now]][i];</div><div class="line">                <span class="keyword">else</span> &#123;</div><div class="line">                    fail[next[now][i]]=next[fail[now]][i];</div><div class="line">                    q.push(next[now][i]);</div><div class="line">                &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="function">Matrix <span class="title">solve</span><span class="params">()</span></span>&#123;</div><div class="line">        Matrix ans=Matrix(L+<span class="number">1</span>);</div><div class="line">        <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;L;i++)</div><div class="line">            <span class="keyword">for</span>(ll j=<span class="number">0</span>;j&lt;<span class="number">26</span>;j++)</div><div class="line">                <span class="keyword">if</span>(!end[next[i][j]])</div><div class="line">                    ans.mat[i][next[i][j]]++;</div><div class="line">        <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;L+<span class="number">1</span>;i++)ans.mat[i][L]=<span class="number">1</span>;</div><div class="line">        <span class="keyword">return</span> ans;</div><div class="line">    &#125;</div><div class="line">&#125;ac;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">debug</span><span class="params">(Matrix a)</span></span>&#123;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"111: "</span>&lt;&lt;a.n&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;a.n;i++)&#123;</div><div class="line">        <span class="keyword">for</span>(ll j=<span class="number">0</span>;j&lt;a.n;j++)</div><div class="line">            <span class="built_in">cout</span>&lt;&lt;a.mat[i][j]&lt;&lt;<span class="string">" "</span>;</div><div class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">char</span> str[<span class="number">40</span>];</div><div class="line"><span class="function">ll <span class="title">PW</span><span class="params">(ll a,ll b)</span></span></div><div class="line">&#123;</div><div class="line">    ll ans=<span class="number">1</span>;</div><div class="line">    <span class="keyword">while</span>(b)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">if</span>(b%<span class="number">2</span>)</div><div class="line">            ans*=a;</div><div class="line">        a*=a;</div><div class="line">        b&gt;&gt;=<span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> ans;</div><div class="line">&#125;</div><div class="line"><span class="function">ll <span class="title">fun</span><span class="params">(ll L)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span>(L==<span class="number">1</span>)</div><div class="line">        <span class="keyword">return</span> <span class="number">26</span>;</div><div class="line">    ll t=<span class="number">0</span>;</div><div class="line">    <span class="keyword">if</span>(L&amp;<span class="number">1</span>)</div><div class="line">        t=PW(<span class="number">26</span>,L);</div><div class="line">    <span class="keyword">return</span> (<span class="number">1</span>+PW(<span class="number">26</span>,L&gt;&gt;<span class="number">1</span>))*fun(L&gt;&gt;<span class="number">1</span>)+t;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    ll n,l,i,j,k,m;</div><div class="line">    <span class="keyword">while</span>(~<span class="built_in">scanf</span>(<span class="string">"%lld%lld"</span>,&amp;n,&amp;l))&#123;</div><div class="line">        ac.init();</div><div class="line">        <span class="keyword">while</span>(n--)&#123;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%s"</span>,str);</div><div class="line">            ac.insert(str);</div><div class="line">        &#125;</div><div class="line">        ac.build();</div><div class="line">        Matrix ans=ac.solve();</div><div class="line">        ans=pw(ans,l);</div><div class="line">        ll cnt=<span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;ans.n;i++)</div><div class="line">            cnt=cnt+ans.mat[<span class="number">0</span>][i];</div><div class="line">        </div><div class="line">        ll cnt1=fun(l);</div><div class="line">        cnt1-=cnt;</div><div class="line">        <span class="built_in">cout</span>&lt;&lt;cnt1+<span class="number">1</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/03/hdu病毒侵袭/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="hnqw1214">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/8E9212F83525E2181D28AA0DBE0BF1D7.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="acmclub.win">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/03/hdu病毒侵袭/" itemprop="url">
                  hdu病毒侵袭
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-03T18:56:29+08:00">
                2017-05-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Problem-Description"><a href="#Problem-Description" class="headerlink" title="Problem Description"></a>Problem Description</h1><p>当太阳的光辉逐渐被月亮遮蔽，世界失去了光明，大地迎来最黑暗的时刻。。。。在这样的时刻，人们却异常兴奋——我们能在有生之年看到500年一遇的世界奇观，那是多么幸福的事儿啊~~<br>但网路上总有那么些网站，开始借着民众的好奇心，打着介绍日食的旗号，大肆传播病毒。小t不幸成为受害者之一。小t如此生气，他决定要把世界上所有带病毒的网站都找出来。当然，谁都知道这是不可能的。小t却执意要完成这不能的任务，他说：“子子孙孙无穷匮也！”（愚公后继有人了）。<br>万事开头难，小t收集了好多病毒的特征码，又收集了一批诡异网站的源码，他想知道这些网站中哪些是有病毒的，又是带了怎样的病毒呢？顺便还想知道他到底收集了多少带病毒的网站。这时候他却不知道何从下手了。所以想请大家帮帮忙。小t又是个急性子哦，所以解决问题越快越好哦~~</p>
<h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>第一行，一个整数N（1&lt;=N&lt;=500），表示病毒特征码的个数。 接下来N行，每行表示一个病毒特征码，特征码字符串长度在20—200之间。 每个病毒都有一个编号，依此为1—N。 不同编号的病毒特征码不会相同。 在这之后一行，有一个整数M（1&lt;=M&lt;=1000），表示网站数。 接下来M行，每行表示一个网站源码，源码字符串长度在7000—10000之间。 每个网站都有一个编号，依此为1—M。 以上字符串中字符都是ASCII码可见字符（不包括回车）。</p>
<h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>依次按如下格式输出按网站编号从小到大输出，带病毒的网站编号和包含病毒编号，每行一个含毒网站信息。 web 网站编号: 病毒编号 病毒编号 … 冒号后有一个空格，病毒编号按从小到大排列，两个病毒编号之间用一个空格隔开，如果一个网站包含病毒，病毒数不会超过3个。 最后一行输出统计信息，如下格式 total: 带病毒网站数 冒号后有一个空格。</p>
<h1 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h1><p>3<br>aaa<br>bbb<br>ccc<br>2<br>aaabbbccc<br>bbaacc</p>
<h1 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h1><p>web 1: 1 2 3<br>total: 1</p>
<h1 id="Source"><a href="#Source" class="headerlink" title="Source"></a>Source</h1><p>2009 Multi-University Training Contest 10 - Host by NIT</p>
<h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><p>AC自动机，用end数组存下单词的id即可。<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ACa</span>&#123;</span></div><div class="line">    <span class="keyword">int</span> next[<span class="number">110000</span>][<span class="number">128</span>],fail[<span class="number">120000</span>],end[<span class="number">120000</span>];</div><div class="line">    <span class="keyword">int</span> root,len;</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">newnode</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">128</span>;i++)</div><div class="line">            next[len][i]=<span class="number">-1</span>;</div><div class="line">        end[len]=<span class="number">-1</span>;</div><div class="line">        len++;</div><div class="line">        <span class="keyword">return</span> len<span class="number">-1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span></span>&#123;</div><div class="line">        len=<span class="number">0</span>;</div><div class="line">        root=newnode();</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">char</span> s[],<span class="keyword">int</span> num)</span></span>&#123;</div><div class="line">        <span class="keyword">int</span> ls=<span class="built_in">strlen</span>(s);</div><div class="line">        <span class="keyword">int</span> now=root;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;ls;i++)&#123;</div><div class="line">            <span class="keyword">if</span>(next[now][s[i]]==<span class="number">-1</span>)</div><div class="line">              next[now][s[i]]=newnode();</div><div class="line">            now=next[now][s[i]];</div><div class="line">        &#125;</div><div class="line">        end[now]=num;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt;q;</div><div class="line">        <span class="keyword">int</span> i;</div><div class="line">        fail[root]=root;</div><div class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">128</span>;i++)&#123;</div><div class="line">            <span class="keyword">if</span>(next[root][i]==<span class="number">-1</span>)</div><div class="line">                next[root][i]=root;</div><div class="line">            <span class="keyword">else</span>&#123;</div><div class="line">                fail[next[root][i]]=root;</div><div class="line">                q.push(next[root][i]);</div><div class="line">                &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">while</span>(!q.empty())&#123;</div><div class="line">            <span class="keyword">int</span> now=q.front();</div><div class="line">            q.pop();</div><div class="line">            <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">128</span>;i++)&#123;</div><div class="line">                <span class="keyword">if</span>(next[now][i]==<span class="number">-1</span>)</div><div class="line">                    next[now][i]=next[fail[now]][i];</div><div class="line">                <span class="keyword">else</span>&#123;</div><div class="line">                    fail[next[now][i]]=next[fail[now]][i];</div><div class="line">                    q.push(next[now][i]);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">bool</span> vis[<span class="number">600</span>];</div><div class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">ask</span><span class="params">(<span class="keyword">char</span> c[],<span class="keyword">int</span> n,<span class="keyword">int</span> num)</span></span>&#123;</div><div class="line">        <span class="keyword">bool</span> flag1=<span class="literal">false</span>;</div><div class="line">        <span class="built_in">memset</span>(vis,<span class="literal">false</span>,<span class="keyword">sizeof</span>(vis));</div><div class="line">        <span class="keyword">int</span> lc=<span class="built_in">strlen</span>(c);</div><div class="line">        <span class="keyword">int</span> now=root;</div><div class="line">        <span class="keyword">int</span> i;</div><div class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;lc;i++)&#123;</div><div class="line">            now=next[now][c[i]];</div><div class="line">            <span class="keyword">int</span> temp=now;</div><div class="line">            <span class="keyword">while</span>(temp!=root)&#123;</div><div class="line">                <span class="keyword">if</span>(end[temp]!=<span class="number">-1</span>)&#123;</div><div class="line">                    flag1=<span class="number">1</span>;</div><div class="line">                    vis[end[temp]]=<span class="number">1</span>; </div><div class="line">                &#125;</div><div class="line">                temp=fail[temp];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(!flag1)<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"web %d:"</span>,num);</div><div class="line">        <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++) <span class="keyword">if</span>(vis[i])<span class="built_in">printf</span>(<span class="string">" %d"</span>,i);</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"\n"</span>);</div><div class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">ACa ac;</div><div class="line"><span class="keyword">char</span> s[<span class="number">20000</span>];</div><div class="line"><span class="keyword">int</span> n,m;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="keyword">int</span> i,j;</div><div class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n)!=EOF)&#123;</div><div class="line">        ac.clear();</div><div class="line">        <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">scanf</span>(<span class="string">"%s"</span>,s) , ac.insert(s,i);</div><div class="line">        ac.build();</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;m);</div><div class="line">        <span class="keyword">int</span> ans=<span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=m;i++)&#123;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%s"</span>,s);</div><div class="line">            <span class="keyword">if</span>(ac.ask(s,n,i))ans++;</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"total: %d\n"</span>,ans);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/8E9212F83525E2181D28AA0DBE0BF1D7.jpg"
               alt="hnqw1214" />
          <p class="site-author-name" itemprop="name">hnqw1214</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">34</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">hnqw1214</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  





  

  

  

  

  

</body>
</html>
